{"ast":null,"code":"import _regeneratorRuntime from \"/home/bruno/Documentos/ignite/desafios/blogPrismic/node_modules/next/node_modules/@babel/runtime/regenerator\";\nimport _toConsumableArray from \"/home/bruno/Documentos/ignite/desafios/blogPrismic/node_modules/next/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";\nimport { Fragment as _Fragment } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport _asyncToGenerator from \"/home/bruno/Documentos/ignite/desafios/blogPrismic/node_modules/next/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport Link from 'next/link';\nimport { useState } from 'react';\nimport { FiUser, FiCalendar } from 'react-icons/fi';\nimport { format } from 'date-fns';\nimport ptBR from 'date-fns/locale/pt-BR';\nimport styles from './home.module.scss';\nexport var __N_SSG = true;\nexport default function Home(_ref) {\n  var postsPagination = _ref.postsPagination,\n      preview = _ref.preview;\n\n  var _useState = useState(postsPagination.results),\n      posts = _useState[0],\n      setPosts = _useState[1];\n\n  var _useState2 = useState(postsPagination.next_page),\n      nextPage = _useState2[0],\n      setNextPage = _useState2[1];\n\n  function handleClickLoadPost() {\n    return _handleClickLoadPost.apply(this, arguments);\n  }\n\n  function _handleClickLoadPost() {\n    _handleClickLoadPost = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n      var response, resultsNextPage;\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              if (!(nextPage === null)) {\n                _context.next = 2;\n                break;\n              }\n\n              return _context.abrupt(\"return\");\n\n            case 2:\n              _context.next = 4;\n              return fetch(\"\".concat(nextPage)).then(function (r) {\n                return r.json();\n              });\n\n            case 4:\n              response = _context.sent;\n              resultsNextPage = response.results.map(function (post) {\n                return {\n                  uid: post.uid,\n                  first_publication_date: post.first_publication_date,\n                  data: {\n                    title: post.data.title,\n                    subtitle: post.data.subtitle,\n                    author: post.data.author\n                  }\n                };\n              });\n              setNextPage(response.next_page);\n              setPosts([].concat(_toConsumableArray(posts), _toConsumableArray(resultsNextPage)));\n\n            case 8:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee);\n    }));\n    return _handleClickLoadPost.apply(this, arguments);\n  }\n\n  return /*#__PURE__*/_jsx(_Fragment, {\n    children: /*#__PURE__*/_jsxs(\"main\", {\n      className: styles.container,\n      children: [posts.map(function (post) {\n        return /*#__PURE__*/_jsx(Link, {\n          href: \"/post/\".concat(post.uid),\n          children: /*#__PURE__*/_jsxs(\"a\", {\n            children: [/*#__PURE__*/_jsx(\"h1\", {\n              children: post.data.title\n            }), /*#__PURE__*/_jsx(\"p\", {\n              children: post.data.subtitle\n            }), /*#__PURE__*/_jsxs(\"div\", {\n              children: [/*#__PURE__*/_jsx(FiCalendar, {}), format(new Date(post.first_publication_date), 'dd MMM yyyy', {\n                locale: ptBR\n              }), /*#__PURE__*/_jsx(FiUser, {}), post.data.author]\n            })]\n          })\n        }, post.uid);\n      }), nextPage && /*#__PURE__*/_jsx(\"button\", {\n        type: \"button\",\n        onClick: handleClickLoadPost,\n        children: \"Carregar mais posts\"\n      }), preview && /*#__PURE__*/_jsx(\"aside\", {\n        className: styles.preview,\n        children: /*#__PURE__*/_jsx(Link, {\n          href: \"/api/exitPreview\",\n          children: /*#__PURE__*/_jsx(\"a\", {\n            children: \"Sair do modo Preview\"\n          })\n        })\n      })]\n    })\n  });\n}","map":null,"metadata":{},"sourceType":"module"}